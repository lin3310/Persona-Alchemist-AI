<div class="h-screen w-full relative overflow-hidden">
  
  @switch (currentView()) {
    @case ('home') {
      <div class="h-full page-enter">
        <app-home (selectMode)="handleModeSelection($event)"></app-home>
      </div>
    }
    @case ('pipeline') {
      <!-- Main Pipeline Flow -->
      @switch (wf.currentStep()) {
        @case ('vibe-entry') {
          <app-vibecode 
            class="h-full block page-enter"
            (switchToTool)="switchToView('tool')" 
            (switchToArchitect)="switchToView('architect')"
            (exit)="goHome()">
          </app-vibecode>
        }
        @case ('crystallize') {
          <div class="h-full page-enter">
            <app-crystallize></app-crystallize>
          </div>
        }
        @case ('refine-director') {
          <div class="h-full page-enter">
            <app-director (exit)="goHome()"></app-director>
          </div>
        }
        @case ('check') {
          <div class="h-full page-enter">
            <app-check></app-check>
          </div>
        }
        @case ('simulation') {
          <div class="h-full page-enter">
            <app-simulation></app-simulation>
          </div>
        }
        @case ('final') {
          <div class="h-full page-enter">
            <app-final></app-final>
          </div>
        }
      }
    }
    @case ('architect') {
      <div class="h-full page-enter">
         <app-architect (close)="goHome()" (refineWithDirector)="handleArchitectRefinement($event)"></app-architect>
      </div>
    }
    @case ('tool') {
       <div class="h-full page-enter">
         <app-tool (close)="goHome()"></app-tool>
      </div>
    }
    @case ('antibias') {
       <div class="h-full page-enter">
         <app-antibias (close)="goHome()"></app-antibias>
      </div>
    }
  }

</div>